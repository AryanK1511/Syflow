table users {
    id int [pk, increment]
    auth0_id varchar [unique, not null]
    email varchar [unique, not null]
    name varchar
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
    updated_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table automations {
    id int [pk, increment]
    name varchar [unique, not null]
    description text
    input_schema jsonb [not null]
    is_active boolean [default: true]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
    updated_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table automation_runs {
    id int [pk, increment]
    user_id int [ref: > users.id, not null]
    automation_id int [ref: > automations.id, not null]
    inputs jsonb [not null]
    result jsonb
    status varchar [not null, note: "Allowed values: pending, success, failed"]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
    updated_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table bookmarked_automations {
    id int [pk, increment]
    user_id int [ref: > users.id, not null]
    automation_id int [ref: > automations.id, not null]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table notifications {
    id int [pk, increment]
    user_id int [ref: > users.id, not null]
    automation_run_id int [ref: > automation_runs.id]
    message text [not null]
    is_read boolean [default: false]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table user_preferences {
    id int [pk, increment]
    user_id int [ref: > users.id, not null]
    notify_on_completion boolean [default: true]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
    updated_at timestamp [default: `CURRENT_TIMESTAMP`]
}

table logs {
    id int [pk, increment]
    automation_run_id int [ref: > automation_runs.id, not null]
    log_message text [not null]
    log_level varchar [not null, note: "Allowed values: info, warning, error"]
    created_at timestamp [default: `CURRENT_TIMESTAMP`]
}

// Relationships
ref: bookmarked_automations.user_id > users.id
ref: bookmarked_automations.automation_id > automations.id
ref: notifications.user_id > users.id
ref: notifications.automation_run_id > automation_runs.id
ref: automation_runs.user_id > users.id
ref: automation_runs.automation_id > automations.id
ref: logs.automation_run_id > automation_runs.id
